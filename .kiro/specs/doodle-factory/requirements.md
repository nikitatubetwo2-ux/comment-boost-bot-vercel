# Requirements Document

## Introduction

Doodle Factory — это автономный инструмент для создания образовательных/объяснительных видео в стиле "whiteboard animation" (doodle style). Продукт позволяет автоматически генерировать динамичные видео из текстового скрипта, используя библиотеку готовых cartoon-элементов и простые анимации. Результат — видео где "постоянно что-то происходит", создающее иллюзию полноценной анимации без сложного монтажа.

Целевые ниши: экономика, финансы, история, наука, образование, лайфхаки.

## Glossary

- **Doodle Factory**: Система для автоматической генерации whiteboard-style видео
- **Asset**: Графический элемент (PNG с прозрачностью) в едином cartoon стиле — персонаж, объект, иконка
- **Scene**: Композиция из нескольких assets с анимациями, соответствующая фрагменту скрипта
- **Animation**: Простое движение элемента — появление, перемещение, масштабирование, исчезновение
- **Script**: Текстовый сценарий видео с разметкой на сцены
- **Timeline**: Временная шкала синхронизации анимаций с озвучкой
- **Asset Library**: Каталог всех доступных графических элементов с тегами и категориями
- **Scene Composer**: Модуль AI который читает скрипт и собирает сцены из assets
- **Canvas**: Рабочая область видео (1920x1080) где размещаются элементы

## Requirements

### Requirement 1: Управление библиотекой ассетов

**User Story:** Как пользователь, я хочу иметь организованную библиотеку графических элементов, чтобы быстро находить нужные assets для своих видео.

#### Acceptance Criteria

1. WHEN пользователь открывает Asset Library THEN система SHALL отображать все доступные элементы с превью и категориями
2. WHEN пользователь ищет asset по ключевому слову THEN система SHALL возвращать релевантные элементы из всех категорий
3. WHEN пользователь добавляет новый asset THEN система SHALL сохранять его с метаданными (название, категория, теги)
4. WHEN пользователь импортирует папку с assets THEN система SHALL автоматически каталогизировать элементы по структуре папок

### Requirement 2: Создание и редактирование скрипта

**User Story:** Как пользователь, я хочу писать скрипт с разметкой на сцены, чтобы система понимала какие визуальные элементы нужны для каждого фрагмента.

#### Acceptance Criteria

1. WHEN пользователь вводит текст скрипта THEN система SHALL разбивать его на логические сцены автоматически
2. WHEN пользователь редактирует границы сцены THEN система SHALL пересчитывать тайминги для затронутых сцен
3. WHEN скрипт содержит более 10 слов в сцене THEN система SHALL предлагать разбить сцену на части
4. IF скрипт пустой THEN система SHALL отображать подсказки по формату и примеры

### Requirement 3: AI Scene Composer

**User Story:** Как пользователь, я хочу чтобы AI автоматически подбирал визуальные элементы под текст, чтобы не собирать каждую сцену вручную.

#### Acceptance Criteria

1. WHEN пользователь запускает автокомпозицию THEN система SHALL анализировать текст каждой сцены и подбирать релевантные assets
2. WHEN AI подбирает assets THEN система SHALL учитывать контекст предыдущих и следующих сцен для визуальной связности
3. WHEN для сцены не найдено подходящих assets THEN система SHALL предлагать сгенерировать новый элемент или выбрать вручную
4. WHEN AI завершает композицию THEN система SHALL отображать превью каждой сцены для проверки пользователем

### Requirement 4: Система анимаций

**User Story:** Как пользователь, я хочу чтобы элементы на экране двигались и появлялись динамично, чтобы видео выглядело живым и удерживало внимание.

#### Acceptance Criteria

1. WHEN элемент добавляется на сцену THEN система SHALL применять анимацию появления (fade, slide, scale, draw)
2. WHEN элемент должен переместиться THEN система SHALL анимировать движение плавно с настраиваемой скоростью
3. WHEN сцена меняется THEN система SHALL применять переход между сценами (crossfade, wipe, slide)
4. WHEN несколько элементов появляются в сцене THEN система SHALL распределять их появление по времени для динамики
5. WHILE элемент находится на сцене THEN система SHALL поддерживать idle-анимации (лёгкое покачивание, пульсация)

### Requirement 5: Генерация озвучки

**User Story:** Как пользователь, я хочу генерировать качественную озвучку из текста скрипта, чтобы не записывать голос самостоятельно.

#### Acceptance Criteria

1. WHEN пользователь выбирает голос и запускает генерацию THEN система SHALL создавать аудиофайл через ElevenLabs API
2. WHEN озвучка сгенерирована THEN система SHALL автоматически синхронизировать тайминги сцен с аудио
3. WHEN пользователь меняет скрипт после генерации озвучки THEN система SHALL предлагать перегенерировать затронутые фрагменты
4. WHERE пользователь имеет свой аудиофайл THEN система SHALL позволять импортировать его вместо генерации

### Requirement 6: Рендеринг видео

**User Story:** Как пользователь, я хочу экспортировать готовое видео в высоком качестве, чтобы загружать его на YouTube.

#### Acceptance Criteria

1. WHEN пользователь запускает рендеринг THEN система SHALL генерировать видео с разрешением 1920x1080 и 30fps
2. WHEN рендеринг выполняется THEN система SHALL отображать прогресс и примерное время завершения
3. WHEN рендеринг завершён THEN система SHALL сохранять видео в формате MP4 (H.264) в указанную папку
4. IF во время рендеринга происходит ошибка THEN система SHALL сохранять прогресс и позволять продолжить с точки остановки

### Requirement 7: Превью и редактирование сцен

**User Story:** Как пользователь, я хочу видеть превью каждой сцены и редактировать расположение элементов, чтобы контролировать финальный результат.

#### Acceptance Criteria

1. WHEN пользователь выбирает сцену THEN система SHALL отображать интерактивный canvas с текущими элементами
2. WHEN пользователь перетаскивает элемент на canvas THEN система SHALL обновлять его позицию в реальном времени
3. WHEN пользователь изменяет размер элемента THEN система SHALL сохранять пропорции по умолчанию
4. WHEN пользователь нажимает Play THEN система SHALL воспроизводить превью текущей сцены с анимациями и звуком

### Requirement 8: Управление проектами

**User Story:** Как пользователь, я хочу сохранять и загружать проекты, чтобы работать над видео в несколько сессий.

#### Acceptance Criteria

1. WHEN пользователь сохраняет проект THEN система SHALL записывать все данные (скрипт, сцены, настройки) в файл проекта
2. WHEN пользователь открывает существующий проект THEN система SHALL восстанавливать полное состояние редактора
3. WHEN пользователь создаёт новый проект THEN система SHALL предлагать шаблоны для разных типов контента
4. WHEN проект не сохранён и пользователь закрывает приложение THEN система SHALL предупреждать о несохранённых изменениях

### Requirement 9: Генерация assets через AI

**User Story:** Как пользователь, я хочу генерировать недостающие графические элементы через AI, чтобы не искать или рисовать их вручную.

#### Acceptance Criteria

1. WHEN пользователь запрашивает генерацию нового asset THEN система SHALL создавать изображение в едином doodle-стиле через AI
2. WHEN asset сгенерирован THEN система SHALL автоматически удалять фон и сохранять как PNG с прозрачностью
3. WHEN пользователь генерирует asset THEN система SHALL предлагать варианты и позволять выбрать лучший
4. WHEN новый asset добавлен THEN система SHALL автоматически присваивать теги на основе промпта генерации
